{% extends "base.html" %}
{% block content %}
    <div class="module">
    <table>
        <caption>
            Publication references: {{ pub.title }}
        </caption>
        <tr>
            <td><strong>APA:</strong></td>
            <td>
            {% for author in pub.authors.all %}
                {% if forloop.last %}
                    {% if forloop.counter > 1 %}
                        and
                    {% endif %}
                    {{ author.lname }},
                    {{ author.fname }}.
                {% else %}
                    {{ author.lname }},
                    {{ author.fname }},
                {% endif %}
            {% endfor %}
            {% if pub.pub_type == 'BOOK' %}
                ({{ pub.year }}).
                <i>{{ pub.title }}</i>.
                {{ pub.publisher.address.city }},
                {{ pub.publisher.address.province }}:
                {{ pub.publisher.name }}.

            {% elif pub.pub_type == 'PAPR' %}
                ({{ pub.year }}).
                {{ pub.title }}
                <i>{{ pub.journal.name }},
                    {{ pub.volume }}</i>({{ pub.issue }}),
                {{ pub.pages }}.
            {% elif pub.pub_type == 'ARTI' %}
                ({{ pub.year }}, {{pub.day }} {{ pub.month }}) 
                {{ pub.title }}.
                <i>{{ pub.journal.name }}</i>.
            {% elif pub.pub_type == 'REVW' %}
                <i>{{ pub.journal.name }}</i>.
            {% endif %}
            </td>
        </tr>
        <tr>
            <td><strong>MLA:</strong></td>
            <td>
            {% for author in pub.authors.all %}
                {% if forloop.last %}
                    {% if forloop.counter > 1 %}
                        and
                    {% endif %}
                    {{ author.lname }},
                    {{ author.fname }}.
                {% else %}
                    {{ author.lname }},
                    {{ author.fname }},
                {% endif %}
            {% endfor %}
            {% if pub.pub_type == 'BOOK' %}
                <i>{{ pub.title }}</i>.
                {{ pub.publisher.address.city }},
                {{ pub.publisher.address.province }}:
                {{ pub.publisher.name }},
                {{ pub.year }}.

            {% elif pub.pub_type == 'PAPR' %}
                "{{ pub.title }}."
                <i>{{ pub.journal.name }}</i>
                {{ pub.volume }}.{{ pub.issue }}
                ({{ pub.year }}):
                {{ pub.pages }}.
            {% elif pub.pub_type == 'ARTI' %}
                "{{ pub.title }}."
                <i>{{ pub.journal.name }}</i>,
                {{ pub.month }}
                {% if pub.day %}
                    {{ pub.day }},
                {% endif %}
                {{ pub.year }}.
                {{ pub.pages }}.
            {% elif pub.pub_type == 'REVW' %}
                <i>{{ pub.journal.name }}</i>,
            {% endif %}
            {{ pub.medium }}.
            </td>
        </tr>
        <tr>
            <td><strong>Chicago:</strong></td>
            <td>
            {% for author in pub.authors.all %}
                {% if forloop.last %}
                    {% if forloop.counter > 1 %}
                        and
                    {% endif %}
                    {{ author.fname }}
                    {{ author.lname }}.
                {% else %}
                    {{ author.fname }}
                    {% if forloop.revcounter < 3 %}
                        {{ author.lname }}
                    {% else %}
                        {{ author.lname }},
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% if pub.pub_type == 'BOOK' %}
                <i>{{ pub.title }}</i>
                (
                {{ pub.publisher.address.city }}:
                {{ pub.publisher.name }},
                {{ pub.year }}
                )
            {% elif pub.pub_type == 'PAPR' %}
                "{{ pub.title }},"
                <i>{{ pub.journal.name }}</i>
                {{ pub.volume }}
                ({{ pub.year }}):
                {{ pub.issue }}:
                {{ pub.pages }}.
            {% elif pub.pub_type == 'ARTI' %}
                "{{ pub.title }},"
                <i>{{ pub.journal.name }}</i>,
                {{ pub.month }} 
                {% if pub.day %}
                    {{ pub.day }},
                {% endif %}
                {{ pub.year }}.
                {{ pub.pages }}.
            {% elif pub.pub_type == 'REVW' %}
                <i>{{ pub.journal.name }}</i>,
                {% if pub.volume %}
                    {{ pub.volume }}
                    ({{ pub.year }}):
                    {{ pub.issue }}:
                {% else %}
                    {{ pub.month }} 
                    {% if pub.day %}
                        {{ pub.day }},
                    {% endif %}
                    {{ pub.year }}.
                {% endif %}
            {% endif %}
            </td>
        </tr>
    </table>
    </div>
{% endblock content %}
